language: java
jdk:
# jhove-old fails to build with oraclejdk8
#  - oraclejdk8
  - oraclejdk7
  - openjdk7
before_install:
  - git clone https://github.com/openplanets/jhove-old.git
  - cd jhove-old/jhove-releases
  - mvn clean install -DskipTests=true
  - cd ../..
  - git clone https://github.com/bl-dpt/dptutils.git
  - cd dptutils
  - mvn clean install -DskipTests=true
  - cd ..
install:
  # this skips the flint-fx module as it requires jdk8 and that would break jhove.. ..and there aren't tests anyway yet for flint-fx..
  - mvn -pl flint-toolwrappers,flint-core,flint-hadoop-api,flint-pdf,flint-epub,flint-register,flint-cli,flint-hadoop clean install -DskipTests=true
script:
  - mvn -pl flint-toolwrappers,flint-core,flint-hadoop-api,flint-pdf,flint-epub,flint-register,flint-cli,flint-hadoop test
